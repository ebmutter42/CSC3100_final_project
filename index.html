<!--Project by Emily Mutter, Sophia Baker, and Mason Allen-->

<!--Need to add placeholders and aria-labels, 
    X get slideToggle() functional for divLogin->divForgotPassword,
    regex check coop code,
    validate forgot password form
    modify sidebar navigation to work according to active div-->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chicken Coop Application</title>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/gh/gitbrent/bootstrap4-toggle@3.6.1/css/bootstrap4-toggle.min.css" rel="stylesheet">

</head>

<body>
    <div class="vh-100">
        <!--<div id="divHeader" class="col-12 d-none d-lg-block bg-warning sticky-top">
            <div class="d-flex col-8 offset-4 text-center">
                <img src="chicken.png" alt="Chicken" width="100" height="100" class="m-3">
                <div class="m-4">
                    <h1>Chicken Coop</h1>
                    <h4>Where Farmers Connect</h4>
                </div>

            </div>
        </div>-->
        
        <nav class="navbar navbar-warning bg-warning sticky-top">
            <div class="container-fluid">
                
                <div class="d-flex col-12 align-items-center">
                    
                    <div class="d-flex col-7 offset-4 text-center">
                        <img src="chicken.png" alt="Chicken Logo" width="80" height="80" class="m-3">
                        <div class="m-4">
                            <h2>Chicken Coop</h2>
                            <h5>Where Farmers Connect</h5>
                        </div>
                    </div>

                    <button id="btnSideBar" class="navbar-toggler d-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#sideBar">
                        <span class="navbar-toggler-icon" aria-label="Navigation Menu"></span>
                    </button>
                </div>
                
                <div class="offcanvas offcanvas-end text-bg-warning" tabindex="-1" id="sideBar" >
                    <div class="offcanvas-header">
                        <h2></h2>
                        <button id="btnCloseNav" type="button" class="btn-close btn-close-dark" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                    </div>
                    <div class="offcanvas-body">
                    <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
                        <li class="nav-item">
                        <a id="linkDashboard" class="nav-link" href="#" aria-label="Dashboard Link">
                            <h3>
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="width:20px;"><path d="M64 64c0-17.7-14.3-32-32-32S0 46.3 0 64V400c0 44.2 35.8 80 80 80H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H80c-8.8 0-16-7.2-16-16V64zm406.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L320 210.7l-57.4-57.4c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L240 221.3l57.4 57.4c12.5 12.5 32.8 12.5 45.3 0l128-128z"/></svg>
                                Dashboard
                            </h3>
                        </a>
                        </li>
                        <li class="nav-item">
                        <a id="linkSettings" class="nav-link" href="#" aria-label="Settings Link">
                            <h3>  
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="width:20px;"><path d="M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L83.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C64.6 273.1 64 264.6 64 256s.6-17.1 1.7-25.4L22.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9-16.3 18.2-17.8C227.3 1.2 241.5 0 256 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336c44.2 0 80-35.8 80-80s-35.8-80-80-80s-80 35.8-80 80s35.8 80 80 80z"/></svg>                            
                                Settings
                            </h3>
                        </a>
                        </li>
                        <li class="nav-item">
                            <a id="linkWarnings" class="nav-link" href="#" aria-label="Warnings Link">
                                <h3>
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="width:20px;"><path d="M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224c0-17.7-14.3-32-32-32s-32 14.3-32 32s14.3 32 32 32s32-14.3 32-32z"/></svg>
                                    Warnings
                                </h3>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a id="linkLogout" class="nav-link" href="#" aria-label="Logout Link">
                                <h3>
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="width:20px;"><path d="M160 96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96C43 32 0 75 0 128V384c0 53 43 96 96 96h64c17.7 0 32-14.3 32-32s-14.3-32-32-32H96c-17.7 0-32-14.3-32-32l0-256c0-17.7 14.3-32 32-32h64zM504.5 273.4c4.8-4.5 7.5-10.8 7.5-17.4s-2.7-12.9-7.5-17.4l-144-136c-7-6.6-17.2-8.4-26-4.6s-14.5 12.5-14.5 22v72H192c-17.7 0-32 14.3-32 32l0 64c0 17.7 14.3 32 32 32H320v72c0 9.6 5.7 18.2 14.5 22s19 2 26-4.6l144-136z"/></svg>
                                    Logout
                                </h3>
                            </a>
                        </li>
                    </ul>
                    </div>
                </div>
            </div>
        </nav>
        
        
        <div id="divRegistration" class="col-6 offset-3 pt-5" style="display:none;">
            <div class="card-body">
                <div class="text-center">
                    <h2>Create Your Chicken Coop Account</h2>
                    <h5>If you already have a Chicken Coop account, please use it to <button id="btnGoToLogin" type="button" class="btnSwap" aria-label="Press to go to sign in">sign in</button></h5>
                </div>
                
                <form>
                    <div class="form-group">
                        <label for="txtCreateFirstName" class="form-label mt-4">First Name</label>
                        <input class="form-control" type="text" id="txtCreateFirstName" aria-label="Enter First Name">
                    </div>
                    <div class="form-group">
                        <label for="txtCreateLastName" class="form-label mt-4">Last Name</label>
                        <input class="form-control" type="text" id="txtCreateLastName" aria-label="Enter Last Name">
                    </div>
                    <div class="form-group">
                        <label for="txtCreateEmail" class="form-label mt-4">Email</label>
                        <input class="form-control" type="email" id="txtCreateEmail" aria-label="Enter Email">
                    </div>
                    <div class="form-group">
                        <label for="txtCreatePassword" class="form-label mt-4">Password (MUST be at least 8 characters and include an upper case and lower case letter, a number, and a special character)</label>
                        <input class="form-control" type="password" id="txtCreatePassword" aria-label="Enter Password">
                    </div>
                    
                    <!-- Customer Address -->
                    <div class="form-group">
                        <label for="txtCreateAStreet1" class="form-label mt-4">Street 1</label>
                        <input class="form-control" type="text" id="txtCreateAStreet1" aria-label="Enter Street 1">
                    </div>
                    <div class="form-group">
                        <label for="txtCreateAStreet2" class="form-label mt-4">Street 2</label>
                        <input class="form-control" type="text" id="txtCreateAStreet2" aria-label="Enter Street 2">
                    </div>
                    <div class="form-group">
                        <label for="txtCreateACity" class="form-label mt-4">City</label>
                        <input class="form-control" type="text" id="txtCreateACity" aria-label="Enter City">
                    </div>
                    <div class="form-group">
                        <label for="txtCreateAState" class="form-label mt-4">State</label>
                        <input class="form-control" type="text" id="txtCreateAState" aria-label="Enter State">
                    </div>
                    <div class="form-group">
                        <label for="txtCreateAZIP" class="form-label mt-4">ZIP</label>
                        <input class="form-control" type="text" id="txtCreateAZIP" aria-label="Enter Zipcode">
                    </div>
                    
                    <!-- Address of Coop (if different) -->
                    <div class="form-check mt-5">
                        <label for="txtIsCoopSameAsPersonal" class="form-check-label">
                            <input class="form-check-input" type="checkbox" id="txtIsCoopSameAsPersonal" aria-label="Checkbox if Coop Address is Different From Personal Address">
                            Coop Is Not Located At Personal Address
                        </label>
                    </div>
                    <div id="formStreet1" class="form-group d-none">
                        <label for="txtCreateBStreet1" class="form-label mt-4">Street 1</label>
                        <input class="form-control" type="text" id="txtCreateBStreet1" aria-label="Enter Coop Street 1">
                    </div>
                    <div id="formStreet2" class="form-group d-none">
                        <label for="txtCreateBStreet2" class="form-label mt-4">Street 2</label>
                        <input class="form-control" type="text" id="txtCreateBStreet2" aria-label="Enter Coop Street 2">
                    </div>
                    <div id="formCity" class="form-group d-none">
                        <label for="txtCreateBCity" class="form-label mt-4">City</label>
                        <input class="form-control" type="text" id="txtCreateBCity" aria-label="Enter Coop City">
                    </div>
                    <div id="formState" class="form-group d-none">
                        <label for="txtCreateBState" class="form-label mt-4">State</label>
                        <input class="form-control" type="text" id="txtCreateBState" aria-label="Enter Coop State">
                    </div>
                    <div id="formZip" class="form-group d-none">
                        <label for="txtCreateBZIP" class="form-label mt-4">ZIP</label>
                        <input class="form-control" type="text" id="txtCreateBZIP" aria-label="Enter Coop Zipcode">
                    </div>
                    
                    <div class="form-group">
                        <label for="txtCreateCode" class="form-label mt-4">Enter a code consisting of letters and numbers which will be associated with your Coop:</label>
                        <input class="form-control" type="text" id="txtCreateCode" aria-label="Enter Coop Code">
                    </div>
                </form>
                <button id="btnRegister" class="btn btn-info col-12 mt-3 mb-5" type="button">Create Account</button>
            </div>
        </div>
        
        <div id="divLogin" class="col-6 offset-3 pt-5">
            <div class="card-body">
                <div class="text-center">
                    <h2>Sign In</h2>
                    <h5>New to Chicken Coop? Create An Account <button id="btnGoToRegistration" type="button" aria-label="Press to go to account creation">here</button></h5>
                </div>
                
                <form id="formLogin">
                    <div class="form-group">
                        <label for="txtLoginEmail" class="form-label mt-4">Email</label>
                        <input class="form-control" type="email" id="txtLoginEmail" aria-label="Enter Email">
                    </div>
                    <div class="form-group">
                        <label for="txtLoginPassword" class="form-label mt-4">Password</label>
                        <input class="form-control" type="password" id="txtLoginPassword" aria-label="Enter Password">
                    </div>
                    
                    <button class="btn btn-info mt-3 col-12" type="button" id="btnLogin">Login</button>
                    <button id="btnForgotPassword" class="btn btn-link mt-3 col-12" type="button">Forgot Password?</button>
                </form>
            </div>
        </div>
        
        <div id="divForgotPassword" class="col-6 offset-3 pt-5" style="display:none;">
            <div class="card-body">
                <div class="text-center">
                    <h2>Forgot Your Password?</h2>
                    <h5>Please Enter the Email You Used to Sign Up For Chicken Coop</h5>
                </div>
                
                <form id="formLogin">
                    <div class="form-group">
                        <label for="txtRecoveryEmail" class="form-label mt-4">Email</label>
                        <input class="form-control" type="email" id="txtRecoveryEmail" aria-label="Enter Password">
                    </div>
                    
                    <button class="btn btn-info mt-3 col-12" type="button" id="btnRequestPasswordReset">Request Password Reset</button>
                    <button class="btn btn-link mt-3 col-12" type="button" id="btnBackToSignIn">Back To Sign In</button>
                </form>
            </div>
        </div>
        
        <div id="divDashboard" class="col-10 offset-1 pt-5 text-center" style="display:none">
            <div class="d-block d-lg-flex text-light">
                <div class="card m-2 bg-success">
                    <div class="card-header">
                        <h2>Eggs Harvested This Year</h2>
                    </div>
                    <div class="card-body">
                        <h2>204,092</h2>
                    </div>
                </div>
                <div class="card m-2 bg-info">
                    <div class="card-header">
                        <h2>Current Temperature</h2>
                    </div>
                    <div class="card-body">
                        <h2>20.04 &#176;C</h2>
                    </div>
                </div>
                <div class="card m-2 bg-danger">
                    <div class="card-header">
                        <h2>Current Humidity</h2>
                    </div>
                    <div class="card-body">
                        <h2>45.08%</h2>
                    </div>
                </div>
                <div class="card m-2 bg-warning">
                    <div class="card-header">
                        <h2>Days Until Clean Out</h2>
                    </div>
                    <div class="card-body">
                        <h2 id="txtDaysToClean"></h2>
                    </div>
                </div>
            </div>
            
            <div>
                <div class="card col-12 m-2 bg-light">
                    <div class="card-header">
                        <h2>Temperature & Humidity This Week</h2>
                    </div>
                    <div class="card-body">
                        <canvas id="myChart" ></canvas>
                        
                    </div>
                </div>
            </div>
        </div>
        
        <div id="divSettings" style="display:none;" class="text-light">
            <div id="divSettingsBody">
                <div class="card m-2 bg-info">
                    <div class="card-header">
                        <h2 class="text-light">Automatic Settings</h2> <!-- style="color:rgb(0, 0, 0); -->
                    </div>
                    <div class="card-body">
                        <div class="d-flex">
                            <h2 class="col-6">Coop Door Opens at <a id="timeDoorOpens">9:00am</a></h2>
                            <input type="time" id="inputTimeDoorOpens" class="col-3 m-2" aria-label="Enter New Door Opening Time">
                            <button id="btnTimeDoorOpens" type="button" class="col-2 btn btn-light m-2">Submit</button>
                        </div>

                        <div class="d-flex">
                            <h2 class="col-6">Coop Door Closses at <a id="timeDoorCloses">10:00pm</a></h2>
                            <input type="time" id="inputTimeDoorCloses" class="col-3 m-2" aria-label="Enter New Door Closing Time">
                            <button id="btnTimeDoorCloses" type="button" class="col-2 btn btn-light m-2">Submit</button>
                        </div>
                        
                        <div class="d-flex">
                            <h2 class="col-6">Coop Lights Turn On at <a id="timeLightsOn">9:00am</a></h2>
                            <input type="time" id="inputTimeLightsOn" class="col-3 m-2" aria-label="Enter New Lights On Time">
                            <button id="btnTimeLightsOn" type="button" class="col-2 btn btn-light m-2">Submit</button>
                        </div>

                        <div class="d-flex">
                            <h2 class="col-6">Coop Lights Turn Off at <a id="timeLightsOff">10:00pm</a></h2>
                            <input type="time" id="inputTimeLightsOff" class="col-3 m-2" aria-label="Enter New Lights Off Time">
                            <button id="btnTimeLightsOff" type="button" class="col-2 btn btn-light m-2">Submit</button>
                        </div>

                        <div class="d-flex">
                            <h2 class="col-6">Coop Heater Turns On at <a id="tempHeaterOn">35</a>&#176;</h2>
                            <input type="number" id="inputTempHeaterOn" class="col-3 m-2" aria-label="Enter New Heater On Temperature" min="-18" max="38">
                            <button id="btnTempHeaterOn" type="button" class="col-2 btn btn-light m-2">Submit</button>
                        </div>

                        <div class="d-flex">
                            <h2 class="col-6">Coop Fan Turns On at <a id="tempFanOn">80</a>&#176;</h2>
                            <input type="number" id="inputTempFanOn" class="col-3 m-2" aria-label="Enter New Fan On Temperature" min="-18" max="38">
                            <button id="btnTempFanOn" type="button" class="col-2 btn btn-light m-2">Submit</button>
                        </div>

                        <div class="d-flex">
                            <h2 class="col-6">Low Water Alarm Set For <a id="percentLowWater">30</a>%</h2>
                            <input type="number" id="inputPercentLowWater" class="col-3 m-2" aria-label="Enter New Low Water Percentage" min="0" max="100">
                            <button id="btnPercentLowWater" type="button" class="col-2 btn btn-light m-2">Submit</button>
                        </div>


                        <div class="d-flex">
                            <h2 class="col-6">Low Food Alarm Set For <a id="percentLowFood">20</a>%</h2>
                            <input type="number" id="inputPercentLowFood" class="col-3 m-2" aria-label="Enter New Low Food Percentage" min="0" max="100">
                            <button id="btnPercentLowFood" type="button" class="col-2 btn btn-light m-2">Submit</button>
                        </div>
                        <!-- add button & input options to change settings -->
                    </div>
                </div>
                
                <div class="card m-2 bg-success">
                    <div class="card-header">
                        <h2 class="text-light">Manual Triggers</h2> <!-- style="color:rgb(0, 0, 0);" -->
                    </div>
                    <div class="card-body">
                        <!--<h2><button id="btnHeaterOn" type="button" class="">Turn On Heater</button></h2>
                        <h2><button id="btnHeaterOff" type="button" class="">Turn Off Heater</button></h2>-->
                        <div class="d-flex">
                            <h2 class="col-6">Door State</h2>
                            <div class="form-check form-switch col-6">
                                <input type="checkbox" checked data-toggle="toggle" data-width="100" data-on="Open" data-off="Closed" aria-label="Toggle to Open and Close Door">
                            </div>
                        </div>

                        <div class="d-flex">
                            <h2 class="col-6">Fan State</h2>
                            <div class="form-check form-switch col-6">
                                <input type="checkbox" checked data-toggle="toggle" data-width="100" aria-label="Toggle to Turn Fan On or Off">

                            </div>
                        </div>

                        <div class="d-flex">
                            <h2 class="col-6">Light State</h2>
                            <div class="form-check form-switch col-6 d-flex">
                                <input type="checkbox" checked data-toggle="toggle" data-width="100" aria-label="Toggle to Turn Light On or Off">
                            </div>
                        </div>


                        
                        <!--<h2><button id="btnFanOn" type="button" class="">Turn On Fan</button></h2>
                        <h2><button id="btnFanOff" type="button" class="">Turn Off Fan</button></h2>
                        
                        <h2><button id="btnLightOn" type="button" class="">Turn On Lights</button></h2>
                        <h2><button id="btnLightOff" type="button" class="">Turn Off Lights</button></h2>-->
                    </div>
                </div>
            </div>
            
        </div>
    </div>
    
    <script src="js/jquery-3.6.1.min.js"></script>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/sweetalert2@11.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/gitbrent/bootstrap4-toggle@3.6.1/js/bootstrap4-toggle.min.js"></script>

    <script>
        let arrActive = [];
        $('#divLogin').addClass('active');
        arrActive.push('#divLogin');


        today = new Date();
        var cleanout = new Date('01/15/2023');
        var Difference_In_Time = cleanout.getTime() - today.getTime();
        var Difference_In_Days = Math.round(Difference_In_Time / (1000 * 3600 * 24)) + 1;
        $('#txtDaysToClean').text(Difference_In_Days);
        
        $('#btnGoToRegistration').on('click',function(){
            // Use this click handler to toggle the view of the user registration and login <div> elements
            handleArrActive(arrActive, '#divRegistration');

        })

        $('#btnGoToLogin').on('click',function(){
            // Use this click handler to toggle the view of the user registration and login <div> elements
            handleArrActive(arrActive, '#divLogin');

        })
        
        $('#txtIsCoopSameAsPersonal').on('change', function(){
            $('#formStreet1').removeClass('d-none');
            $('#formStreet2').removeClass('d-none');
            $('#formCity').removeClass('d-none');
            $('#formState').removeClass('d-none');
            $('#formZip').removeClass('d-none');

        })
        
        $('#btnBackToSignIn').on('click',function(){
            handleArrActive(arrActive, '#divLogin');

        })

        $('#btnForgotPassword').on('click',function(){
            handleArrActive(arrActive, '#divForgotPassword');

        })
        
        $('#btnRegister').on('click',function(){
            let strCoopStreet1;
            let strCoopStreet2;
            let strCoopCity;
            let strCoopState;
            let strCoopZip;
            let strEmail = $('#txtCreateEmail').val();
            let strFirstName = $('#txtCreateFirstName').val();
            let strLastName = $('#txtCreateLastName').val();
            let strPassword = $('#txtCreatePassword').val();
            let strStreet1 = $('#txtCreateAStreet1').val();
            let strStreet2 = $('#txtCreateAStreet2').val();
            let strCity = $('#txtCreateACity').val();
            let strState = $('#txtCreateAState').val();
            let strZip = $('#txtCreateAZIP').val();
            if(!$('#txtCoopNotSameAsPersonal').is(':checked')){
                strCoopStreet1 = $('#txtCreateAStreet1').val();
                strCoopStreet2 = $('#txtCreateAStreet2').val();
                strCoopCity = $('#txtCreateACity').val();
                strCoopState = $('#txtCreateAState').val();
                strCoopZip = $('#txtCreateAZIP').val();
            } else {
                strCoopStreet1 = $('#txtCreateBStreet1').val();
                strCoopStreet2 = $('#txtCreateBStreet2').val();
                strCoopCity = $('#txtCreateBCity').val();
                strCoopState = $('#txtCreateBState').val();
                strCoopZip = $('#txtCreateBZIP').val();
            }
            let strCode = $('#txtCreateCode').val();
                
            let blnError = false; 
            let strErrorMessage = ''; 
            
            if(!strEmail){ 
                blnError = true; 
                strErrorMessage += '<p> you must enter an email.</p>'
            } else if(strEmail && !isValidEmail(strEmail)){
                blnError = true;
                strErrorMessage += '<p> you must enter a valid email address</p>'
            }
            
            
            if(!strPassword){ 
                blnError = true; 
                strErrorMessage += '<p> you must enter a password.</p>'
            }else if(strPassword && !isValidPassword(strPassword)){
                blnError = true;
                strErrorMessage += '<p> you must enter a valid password containing: a capital letter (A), a lowercase letter(a) a number(0-9) and a special character(*)</p>'
            }
            
            if(!strFirstName){ 
                blnError = true; 
                strErrorMessage += '<p> you must enter a first name.</p>'
            }
            
            if(!strLastName){ 
                blnError = true; 
                strErrorMessage += '<p> you must enter a last name.</p>'
            }
            
            if(!strStreet1){ 
                blnError = true; 
                strErrorMessage += '<p> you must enter a street.</p>'
            }
            
            if(!strCity){ 
                blnError = true; 
                strErrorMessage += '<p> you must enter a city.</p>'
            }
            
            if(!strState){ 
                blnError = true; 
                strErrorMessage += '<p> you must enter a state.</p>'
            }
            
            if(!strZip){ 
                blnError = true; 
                strErrorMessage += '<p> you must enter a zipcode.</p>'
            }
            
            if(!strCoopStreet1){ 
                blnError = true; 
                strErrorMessage += '<p> you must enter a coop street.</p>'
            }
            
            if(!strCoopCity){ 
                blnError = true; 
                strErrorMessage += '<p> you must enter a coop city.</p>'
            }
            
            if(!strCoopState){ 
                blnError = true; 
                strErrorMessage += '<p> you must enter a coop state.</p>'
            }
            
            if(!strCoopZip){ 
                blnError = true; 
                strErrorMessage += '<p> you must enter a coop zipcode.</p>'
            }
            
            if(!strCode){
                blnError = true;
                strErrorMessage += '<p> you must enter a coop identification code.</p>'
            }
            
            if(blnError == true){
                Swal.fire({
                    type: 'error',
                    title: "Oh No",
                    html: strErrorMessage
                })
            } else{
                $.post('https://simplecoop.swollenhippo.com/coop.php', {}).done(function(result){
                    const coop = JSON.parse(result);

                    console.log(coop.CoopID);
                    if(!coop.CoopID){
                    Swal.fire({
                    icon: 'error',
                    title: 'Uh Oh...'
                    })
                    } else {
                        $.post('https://simplecoop.swollenhippo.com/users.php', {Email:strEmail, Password:strPassword, FirstName:strFirstName, LastName:strLastName, CoopID:coop.CoopID}).done(function(result){

                        const obj = JSON.parse(result);

                        console.log(obj.Outcome);

                        if(!obj.Outcome){
                            Swal.fire({
                            icon: 'error',
                            title: 'Uh Oh...',
                            text: obj.Error
                            })
                            console.log(obj.Error);
                        } else {
                            Swal.fire({
                            icon: 'success',
                            title: obj.Outcome,
                            })

                            $.post('https://simplecoop.swollenhippo.com/sessions.php', {Email:strEmail, Password:strPassword}).done(function(result){

                            console.log(result);
                            const obj = JSON.parse(result);

                            console.log(obj);

                            if(obj.SessionID){
                                $('#txtEmail').val('');
                                $('#txtPassword').val('');
                                sessionStorage.setItem("SessionID", obj.SessionID)

                                handleArrActive(arrActive, '#divDashboard');


                                //uncomment after API implemented
                                $('#btnSideBar').removeClass('d-none');
                                $('#sideBar').removeClass('d-none');

                                }
                                console.log(obj.Outcome);
                                console.log(obj.Error);


                                })
                            }
                        })


                    }
                })
            }   


                
            
        
        })
        
        
        function isValidEmail(strEmail){
            let regEmail = /[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;
            return regEmail.test(strEmail);
        }
        function isValidPassword(strPassword){
            let regPassword = /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,64}$/;
            return regPassword.test(strPassword);
        }
        
        $('#btnLogin').on('click', function(){
            let strEmail = $('#txtLoginEmail').val();
            let strPassword = $('#txtLoginPassword').val();
            
            let blnError = false;
            let strErrorMessage = '';
            if(!strEmail){
                blnError = true;
                strErrorMessage += '<p>Email cannot be blank</p>';
            }
            if(!strPassword){
                blnError = true;
                strErrorMessage += '<p>Password cannot be blank</p>';
            }
            
            if(blnError == true){
                Swal.fire({
                    type: 'error',
                    title: "Oh No",
                    html: strErrorMessage
                })
            } else{
                console.log('Success');
            }
            
            /*$('#divDashboard').slideToggle('d-none');
            $('#divLogin').slideToggle('d-none');

            $('#divDashboard').addClass('active');
            arrActive.push('#divDashboard');*/
            handleArrActive(arrActive, '#divDashboard');
            
            //uncomment after API implemented
            $('#btnSideBar').removeClass('d-none');
            $('#sideBar').removeClass('d-none');
        })
        
        $('#btnRequestPasswordReset').on('click', function(){
            
        })
        
        $('#linkDashboard').on('click', function(){
            handleArrActive(arrActive, '#divDashboard');
            $('#btnCloseNav').click();
        })
        
        $('#linkSettings').on('click', function(){
            handleArrActive(arrActive, '#divSettings');
            $('#btnCloseNav').click();
        })
        
        $('#linkWarnings').on('click', function(){
            Swal.fire({
                    type: 'error',
                    title: "Oh No",
                    text: 'WARNINGS'
                })
        })
        
        $('#linkLogout').on('click', function(){
            handleArrActive(arrActive, '#divLogin');

            //uncomment after API is implemented
            $('#btnSideBar').addClass('d-none');
            $('#btnCloseNav').click();

        })


        function handleArrActive(arrActive, curElement){
            console.log(arrActive);
            for (let element of arrActive) {
                $(element).slideToggle('d-none');
                $(element).removeClass('active');
                arrActive.pop();
            };

            handleCurElement(curElement);
        }

        function handleCurElement(curElement){
            if (!$(curElement).hasClass('active')){
                $(curElement).slideToggle('d-none');

                $(curElement).addClass('active');
                arrActive.push(curElement);
            }
        }



        //settings button clicks

        $('#btnTimeDoorOpens').on('click', function(){
            strDoorOpens = $('#inputTimeDoorOpens').val();

            if (strDoorOpens != null && strDoorOpens != '') {
                $('#timeDoorOpens').text(strDoorOpens);
            }
            
        })
        
        $('#btnTimeDoorCloses').on('click', function(){
            strDoorCloses = $('#inputTimeDoorCloses').val();

            if (strDoorCloses != null && strDoorCloses != '') {
                $('#timeDoorCloses').text(strDoorCloses);
            }
            
        })
        
        $('#btnTimeLightsOn').on('click', function(){
            strLightsOn = $('#inputTimeLightsOn').val();

            if (strLightsOn != null && strLightsOn != '') {
                $('#timeLightsOn').text(strLightsOn);
            }
            
        })
        
        $('#btnTimeLightsOff').on('click', function(){
            strLightsOff = $('#inputTimeLightsOff').val();

            if (strLightsOff != null && strLightsOff != '') {
                $('#timeLightsOff').text(strLightsOff);
            }
            
        })
        
        $('#btnTempHeaterOn').on('click', function(){
            strHeaterOn = $('#inputTempHeaterOn').val();

            if (strHeaterOn != null && strHeaterOn != '') {
                $('#tempHeaterOn').text(strHeaterOn);
            }
            
        })
        
        $('#btnTempFanOn').on('click', function(){
            strFanOn = $('#inputTempFanOn').val();

            if (strFanOn != null && strFanOn != '') {
                $('#tempFanOn').text(strFanOn);
            }
            
        })
        
        $('#btnPercentLowWater').on('click', function(){
            strLowWater = $('#inputPercentLowWater').val();

            if (strLowWater != null && strLowWater != '') {
                $('#percentLowWater').text(strLowWater);
            }
            
        })
        
        $('#btnPercentLowFood').on('click', function(){
            strLowFood = $('#inputPercentLowFood').val();

            if (strLowFood != null && strLowFood != '') {
                $('#percentLowFood').text(strLowFood);
            }
            
        })
    </script>
    
    <script>
        const ctx = document.getElementById('myChart').getContext('2d');
        var xValues = ['11/11/22','11/12/22','11/13/22','11/14/22','11/15/22','11/16/22','11/17/22'];
        const myChart = new Chart(ctx, {
            type: "line",
            data: {
                labels: xValues,
                datasets: [{
                    //temp
                    label: 'Temperature',
                    yAxisID: 'Temperature',
                    data: [22.09,22.34,21.36,20.3,25.6,21.45,23.01,22.09,22.34,23.36,24.3,25.6,26.45,27.52,25.09,28.34,30.36,35.3,30.6,26.45,24.52],
                    borderColor: "red",
                    fill: false
                }, {
                    //humidity
                    label: 'Humidity',
                    yAxisID: 'Humidity',
                    data: [45.24,51.06,49.05,46.39,54.71,49.33,47.88,45.24,43.06,42.05,46.39,53.71,43.05,40.88,45.24,47.06,49.05,46.39,48.71,55.33,50.88],
                    borderColor: "blue",
                    fill: false
                }]
            },
            options: {
                legend: {display: true},
                scales: {
                    yAxes: [{
                        id: 'Temperature',
                        type: 'linear',
                        position: 'right',
                        label: 'Temperature (C)'
                    }, {
                        id: 'Humidity',
                        type: 'linear',
                        position: 'left',
                        label: 'Humidity'
                    }]
                }
            }
        });
    </script>
</body>
</html>