<!--Project by Emily Mutter, Sophia Baker, and Mason Allen-->

<!--Need to add placeholders and aria-labels, 
    get slideToggle() functional for divLogin->divForgotPassword,
    regex check coop code,
    validate forgot password form-->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chicken Coop Application</title>
    <link href="css/bootstrap.min.css" rel="stylesheet">
</head>

<body>
    <div class="vh-100">
        <!--<div id="divHeader" class="col-12 d-none d-lg-block bg-warning sticky-top">
            <div class="d-flex col-8 offset-4 text-center">
                <img src="chicken.png" alt="Chicken" width="100" height="100" class="m-3">
                <div class="m-4">
                    <h1>Chicken Coop</h1>
                    <h4>Where Farmers Connect</h4>
                </div>

            </div>
        </div>-->

        <nav class="navbar navbar-warning bg-warning sticky-top">
            <div class="container-fluid">

                <div class="d-flex col-8 offset-4 text-center">
                    <img src="chicken.png" alt="Chicken" width="100" height="100" class="m-3">
                    <div class="m-4">
                        <h1>Chicken Coop</h1>
                        <h4>Where Farmers Connect</h4>
                    </div>
                </div>

            <!--add class of d-none after API implementation-->
                <button id="btnSideBar" class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#sideBar" >
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="offcanvas offcanvas-end text-bg-warning" tabindex="-1" id="sideBar" >
                    <div class="offcanvas-header">
                    <h2 class="offcanvas-title text-light" id="sideBarLabel">/Temp Text for Side Bar/</h2>
                    <button type="button" class="btn-close btn-close-dark" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                    </div>
                    <div class="offcanvas-body">
                    <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
                        <li class="nav-item">
                        <a id="linkDashboard" class="nav-link h1" href="#">Dashboard</a>
                        </li>
                        <li class="nav-item">
                        <a id="linkSettings" class="nav-link h1" href="#">Settings</a>
                        </li>
                        <li class="nav-item">
                            <a id="linkWarnings" class="nav-link h1" href="#">Warnings</a>
                        </li>
                        <li class="nav-item">
                            <a id="linkLogout" class="nav-link h1" href="#">Logout</a>
                        </li>
                    </ul>
                    </div>
                </div>
            </div>
        </nav>



        <!--<div class="collapse" id="navbarToggleExternalContent">
            <div class="bg-warning p-4 d-flex">
                <h5 class="text-white h4" style="padding-left:15px;">Dashboard</h5>
                <h5 class="text-white h4" style="padding-left:25px;">Settings</h5>
                <h5 class="text-white h4" style="padding-left:25px;">Warnings</h5>
                <h5 class="text-white h4" style="padding-left:25px;">Logout</h5>
            </div>
        </div>
        <nav class="navbar navbar-warning bg-warning">
        <div class="container-fluid">
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarToggleExternalContent" aria-controls="navbarToggleExternalContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
            </button>
            <div class="d-flex col-8 offset-4 text-center">
                <img src="chicken.png" alt="Chicken" width="100" height="100" class="m-3">
                <div class="m-4">
                    <h1>Chicken Coop</h1>
                    <h4>Where Farmers Connect</h4>
            </div>
        </div>
        </nav>-->

            
        <div id="divRegistration" class="col-6 offset-3 pt-5" style="display:none;">
            <div class="card-body">
                <div class="text-center">
                    <h2>Create Your Chicken Coop Account</h2>
                    <h5>If you already have a Chicken Coop account, please use it to <button id="btnGoToLogin" type="button" class="btnSwap">sign in</button></h5>
                
                </div>
                <form>
                    <div class="form-group">
                        <label for="txtCreateFirstName" class="form-label mt-4">First Name</label>
                        <input class="form-control" type="text" id="txtCreateFirstName">
                    </div>
                    <div class="form-group">
                        <label for="txtCreateLastName" class="form-label mt-4">Last Name</label>
                        <input class="form-control" type="text" id="txtCreateLastName">
                    </div>
                    <div class="form-group">
                        <label for="txtCreateEmail" class="form-label mt-4">Email</label>
                        <input class="form-control" type="email" id="txtCreateEmail">
                    </div>
                    <div class="form-group">
                        <label for="txtCreatePassword" class="form-label mt-4">Password (MUST be at least 8 characters and include an upper case and lower case letter, a number, and a special character)</label>
                        <input class="form-control" type="password" id="txtCreatePassword">
                    </div>
                    
                    <!-- Customer Address -->
                    <div class="form-group">
                        <label for="txtCreateAStreet1" class="form-label mt-4">Street 1</label>
                        <input class="form-control" type="text" id="txtCreateAStreet1">
                    </div>
                    <div class="form-group">
                        <label for="txtCreateAStreet2" class="form-label mt-4">Street 2</label>
                        <input class="form-control" type="text" id="txtCreateAStreet2">
                    </div>
                    <div class="form-group">
                        <label for="txtCreateACity" class="form-label mt-4">City</label>
                        <input class="form-control" type="text" id="txtCreateACity">
                    </div>
                    <div class="form-group">
                        <label for="txtCreateAState" class="form-label mt-4">State</label>
                        <input class="form-control" type="text" id="txtCreateAState">
                    </div>
                    <div class="form-group">
                        <label for="txtCreateAZIP" class="form-label mt-4">ZIP</label>
                        <input class="form-control" type="text" id="txtCreateAZIP">
                    </div>
                    
                    <!-- Address of Coop (if different) -->
                    <div class="form-check mt-5">
                        <label for="txtIsCoopSameAsPersonal" class="form-check-label">
                            <input class="form-check-input" type="checkbox" id="txtIsCoopSameAsPersonal">
                            Coop Is Not Located At Personal Address
                        </label>
                    </div>
                    <div id="formStreet1" class="form-group d-none">
                        <label for="txtCreateBStreet1" class="form-label mt-4">Street 1</label>
                        <input class="form-control" type="text" id="txtCreateBStreet1">
                    </div>
                    <div id="formStreet2" class="form-group d-none">
                        <label for="txtCreateBStreet2" class="form-label mt-4">Street 2</label>
                        <input class="form-control" type="text" id="txtCreateBStreet2">
                    </div>
                    <div id="formCity" class="form-group d-none">
                        <label for="txtCreateBCity" class="form-label mt-4">City</label>
                        <input class="form-control" type="text" id="txtCreateBCity">
                    </div>
                    <div id="formState" class="form-group d-none">
                        <label for="txtCreateBState" class="form-label mt-4">State</label>
                        <input class="form-control" type="text" id="txtCreateBState">
                    </div>
                    <div id="formZip" class="form-group d-none">
                        <label for="txtCreateBZIP" class="form-label mt-4">ZIP</label>
                        <input class="form-control" type="text" id="txtCreateBZIP">
                    </div>

                    <div class="form-group">
                        <label for="txtCreateCode" class="form-label mt-4">Enter a code consisting of letters and numbers which will be associated with your Coop:</label>
                        <input class="form-control" type="text" id="txtCreateCode">
                    </div>
                </form>
                <button id="btnRegister" class="btn btn-info col-12 mt-3 mb-5" type="button">Create Account</button>
            </div>
        </div>

        <div id="divLogin" class="col-6 offset-3 pt-5">
            <div class="card-body">
                <div class="text-center">
                    <h2>Sign In</h2>
                    <h5>New to Chicken Coop? Create An Account <button id="btnGoToRegistration" type="button" class="btnSwap">here</button></h5>
                </div>
                <form id="formLogin">
                    <div class="form-group">
                        <label for="txtLoginEmail" class="form-label mt-4">Email</label>
                        <input class="form-control" type="email" id="txtLoginEmail">
                    </div>
                    <div class="form-group">
                        <label for="txtLoginPassword" class="form-label mt-4">Password</label>
                        <input class="form-control" type="password" id="txtLoginPassword">
                    </div>

                    <button class="btn btn-info mt-3 col-12" type="button" id="btnLogin">Login</button>

                    <button id="btnForgotPassword" class="btn btn-link mt-3 col-12 btnSwapForgot" type="button">Forgot Password?</button>

                </form>
            </div>
        </div>

        <div id="divForgotPassword" class="col-6 offset-3 pt-5" style="display:none;">

            <div class="card-body">
                <div class="text-center">
                    <h2>Forgot Your Password?</h2>
                    <h5>Please Enter the Email You Used to Sign Up For Chicken Coop</h5>
                </div>
                <form id="formLogin">
                    <div class="form-group">
                        <label for="txtRecoveryEmail" class="form-label mt-4">Email</label>
                        <input class="form-control" type="email" id="txtRecoveryEmail">
                    </div>

                    <button class="btn btn-info mt-3 col-12" type="button" id="btnRequestPasswordReset">Request Password Reset</button>

                    <button class="btn btn-link mt-3 col-12 btnSwapForgot" type="button">Back To Sign In</button>

                </form>
            </div>
        </div>

        <div id="divDashboard" class="col-10 offset-1 pt-5 text-center" >
            <div class="d-flex text-light">
                <div class="card m-2 bg-success">
                    <div class="card-header">
                        <h2>Eggs Harvested This Year</h2>
                    </div>
                    <div class="card-body">
                        <h2>/Temp/</h2>
                    </div>
                </div>
                <div class="card m-2 bg-info">
                    <div class="card-header">
                        <h2>Current Temperature</h2>
                    </div>
                    <div class="card-body">
                        <h2>/Temp/</h2>
                    </div>
                </div>
                <div class="card m-2 bg-danger">
                    <div class="card-header">
                        <h2>Current Humidity</h2>
                    </div>
                    <div class="card-body">
                        <h2>/Temp/</h2>
                    </div>
                </div>
                <div class="card m-2 bg-warning">
                    <div class="card-header">
                        <h2>Days Until Clean Out</h2>
                    </div>
                    <div class="card-body">
                        <h2>/Temp/</h2>
                    </div>
                </div>
            </div>

            <div>

                <div class="card col-12 m-2 bg-light">
                    <div class="card-header">
                        <h2>Graph</h2>
                    </div>
                    <div class="card-body">
                        <h2>/Temp/</h2>
                    </div>
                </div>

            </div>
            
        </div>
        
    
    </div>

    <script src="js/jquery-3.6.1.min.js"></script>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/sweetalert2@11.js"></script>
    <script>


        $('.btnSwap').on('click',function(){
            // Use this click handler to toggle the view of the user registration and login <div> elements
            $('#divLogin').slideToggle();
            $('#divRegistration').slideToggle();
        })

        $('#txtIsCoopSameAsPersonal').on('change', function(){
            $('#formStreet1').removeClass('d-none');
            $('#formStreet2').removeClass('d-none');
            $('#formCity').removeClass('d-none');
            $('#formState').removeClass('d-none');
            $('#formZip').removeClass('d-none');

        })

        //does not fully work yet. when trying to toggle, everything disappears
        $('.btnSwapForgot').on('click',function(){
            $('#divForgotPassword').slideToggle('d-none');
            $('#divLogin').slideToggle('d-none');
        })

        $('#btnRegister').on('click',function(){
            let strCoopStreet1;
            let strCoopStreet2;
            let strCoopCity;
            let strCoopState;
            let strCoopZip;
            let strEmail = $('#txtCreateEmail').val();
            let strFirstName = $('#txtCreateFirstName').val();
            let strLastName = $('#txtCreateLastName').val();
            let strPassword = $('#txtCreatePassword').val();
            let strStreet1 = $('#txtCreateAStreet1').val();
            let strStreet2 = $('#txtCreateAStreet2').val();
            let strCity = $('#txtCreateACity').val();
            let strState = $('#txtCreateAState').val();
            let strZip = $('#txtCreateAZIP').val();
            if(!$('#txtCoopNotSameAsPersonal').is(':checked')){
                strCoopStreet1 = $('#txtCreateAStreet1').val();
                strCoopStreet2 = $('#txtCreateAStreet2').val();
                strCoopCity = $('#txtCreateACity').val();
                strCoopState = $('#txtCreateAState').val();
                strCoopZip = $('#txtCreateAZIP').val();
            } else {
                strCoopStreet1 = $('#txtCreateBStreet1').val();
                strCoopStreet2 = $('#txtCreateBStreet2').val();
                strCoopCity = $('#txtCreateBCity').val();
                strCoopState = $('#txtCreateBState').val();
                strCoopZip = $('#txtCreateBZIP').val();
            }
            let strCode = $('#txtCreateCode').val();
        
                
            let blnError = false; 
            let strErrorMessage = ''; 

            if(!strEmail){ 
                blnError = true; 
                strErrorMessage += '<p> you must enter an email.</p>'
            } else if(strEmail && !isValidEmail(strEmail)){
                blnError = true;
                strErrorMessage += '<p> you must enter a valid email address</p>'
            }


            if(!strPassword){ 
                blnError = true; 
                strErrorMessage += '<p> you must enter a password.</p>'
            }else if(strPassword && !isValidPassword(strPassword)){
                blnError = true;
                strErrorMessage += '<p> you must enter a valid password containing: a capital letter (A), a lowercase letter(a) a number(0-9) and a special character(*)</p>'
            }

            
            if(!strFirstName){ 
                blnError = true; 
                strErrorMessage += '<p> you must enter a first name.</p>'
            } 
            

            if(!strLastName){ 
                blnError = true; 
                strErrorMessage += '<p> you must enter a last name.</p>'
            } 

            if(!strStreet1){ 
                blnError = true; 
                strErrorMessage += '<p> you must enter a street.</p>'
            }

            if(!strCity){ 
                blnError = true; 
                strErrorMessage += '<p> you must enter a city.</p>'
            }

            if(!strState){ 
                blnError = true; 
                strErrorMessage += '<p> you must enter a state.</p>'
            }

            if(!strZip){ 
                blnError = true; 
                strErrorMessage += '<p> you must enter a zipcode.</p>'
            }

            if(!strCoopStreet1){ 
                blnError = true; 
                strErrorMessage += '<p> you must enter a coop street.</p>'
            }

            if(!strCoopCity){ 
                blnError = true; 
                strErrorMessage += '<p> you must enter a coop city.</p>'
            }

            if(!strCoopState){ 
                blnError = true; 
                strErrorMessage += '<p> you must enter a coop state.</p>'
            }

            if(!strCoopZip){ 
                blnError = true; 
                strErrorMessage += '<p> you must enter a coop zipcode.</p>'
            }

            if(!strCode){
                blnError = true;
                strErrorMessage += '<p> you must enter a coop identification code.</p>'
            }

            if(blnError == true){
                Swal.fire({
                    type: 'error',
                    title: "Oh No",
                    html: strErrorMessage
                })
            } else{
                console.log('Success');
            }


            $('#divDashboard').slideToggle('d-none');
            $('#divRegistration').slideToggle('d-none');

            //uncomment after API implemented
            //$('#btnSideBar').removeClass('d-none');
            
            
        })


        function isValidEmail(strEmail){
            let regEmail = /[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;
            return regEmail.test(strEmail);
        }
        function isValidPassword(strPassword){
            let regPassword = /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,64}$/;
            return regPassword.test(strPassword);
        }

        $('#btnLogin').on('click', function(){
            let strEmail = $('#txtLoginEmail').val();
            let strPassword = $('#txtLoginPassword').val();

            let blnError = false;
            let strErrorMessage = '';
            if(!strEmail){
                blnError = true;
                strErrorMessage += '<p>Email cannot be blank</p>';
            }
            if(!strPassword){
                blnError = true;
                strErrorMessage += '<p>Password cannot be blank</p>';
            }

            if(blnError == true){
                Swal.fire({
                    type: 'error',
                    title: "Oh No",
                    html: strErrorMessage
                })
            } else{
                console.log('Success');
            }

            $('#divDashboard').slideToggle('d-none');
            $('#divLogin').slideToggle('d-none');

            //uncomment after API implemented
            //$('#btnSideBar').removeClass('d-none');
            
        })

        $('#btnRequestPasswordReset').on('click', function(){

        })

        $('#linkDashboard').on('click', function(){
            //$('#divDashboard').slideToggle('d-none');


        })

        $('#linkSettings').on('click', function(){

        })

        $('#linkWarnings').on('click', function(){

        })

        $('#linkLogout').on('click', function(){
            $('#divDashboard').addClass('d-none');
            $('#divLogin').removeClass('d-none');

            //uncomment after API is implemented
            //$('#btnSideBar').addClass('d-none');

        })

    </script>
</body>
</html>